(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{484:function(a,s,t){"use strict";t.r(s);var n=t(14),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"_1-mysql索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysql索引"}},[a._v("#")]),a._v(" 1. MySQL索引")]),a._v(" "),t("p",[t("code",[a._v("MySQL")]),a._v("索引分为单列索引和组合索引。")]),a._v(" "),t("ul",[t("li",[a._v("单列索引：一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。")]),a._v(" "),t("li",[a._v("组合索引：一个索引包含多个列")])]),a._v(" "),t("p",[a._v("创建索引时，需要确保该索引是应用在sql查询语句的条件（一般作为where子句的条件）")]),a._v(" "),t("p",[a._v("实际上，索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录。")]),a._v(" "),t("hr"),a._v(" "),t("h2",{attrs:{id:"_2-普通索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-普通索引"}},[a._v("#")]),a._v(" 2. 普通索引")]),a._v(" "),t("h3",{attrs:{id:"_2-1-创建索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-创建索引"}},[a._v("#")]),a._v(" 2.1. 创建索引")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("CREATE INDEX indexName ON table_name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("column_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("如果是"),t("code",[a._v("CHAR")]),a._v("，"),t("code",[a._v("VARCHAR")]),a._v("类型，"),t("code",[a._v("length")]),a._v("可以小于字段实际长度；如果是"),t("code",[a._v("BLOB")]),a._v("和"),t("code",[a._v("TEXT")]),a._v("类型，必须指定 "),t("code",[a._v("length")]),a._v("。")]),a._v(" "),t("h3",{attrs:{id:"_2-2-修改表结构-添加索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-修改表结构-添加索引"}},[a._v("#")]),a._v(" 2.2. 修改表结构（添加索引）")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ALTER table tableName ADD INDEX indexName(columnName)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-3-创建表的时候直接指定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-创建表的时候直接指定"}},[a._v("#")]),a._v(" 2.3. 创建表的时候直接指定")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("CREATE TABLE mytable "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" \n    ID INT NOT NULL, \n    username VARCHAR "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" NOT NULL, \n    INDEX "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" indexName "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" username "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" length "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("))")]),a._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h3",{attrs:{id:"_2-4-删除索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-删除索引"}},[a._v("#")]),a._v(" 2.4. 删除索引")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("DROP INDEX "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("indexName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" ON mytable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"_3-唯一索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-唯一索引"}},[a._v("#")]),a._v(" 3. 唯一索引")]),a._v(" "),t("p",[a._v("与普通索引不同的是，唯一索引的索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。")]),a._v(" "),t("h3",{attrs:{id:"_3-1-创建索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-创建索引"}},[a._v("#")]),a._v(" 3.1. 创建索引")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("CREATE UNIQUE INDEX indexName ON mytable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("))")]),a._v(" \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-2-修改表结构-添加索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-修改表结构-添加索引"}},[a._v("#")]),a._v(" 3.2. 修改表结构（添加索引）")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("ALTER table mytable ADD UNIQUE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("indexName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("))")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-3-创建表的时候直接指定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-创建表的时候直接指定"}},[a._v("#")]),a._v(" 3.3. 创建表的时候直接指定")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("CREATE TABLE mytable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" \n\tID INT NOT NULL,   \n\tusername VARCHAR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" NOT NULL,  \n  \tUNIQUE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("indexName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("))")]),a._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h2",{attrs:{id:"_4-使用-alter-命令添加和删除索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用-alter-命令添加和删除索引"}},[a._v("#")]),a._v(" 4. 使用 alter 命令添加和删除索引")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("ALTER TABLE tbl_name ADD PRIMARY KEY (column_list)")]),a._v("：该语句添加一个主键，这意味着索引值必须是唯一的，且不能为NULL。")]),a._v(" "),t("li",[t("strong",[a._v("ALTER TABLE tbl_name ADD UNIQUE index_name (column_list)")]),a._v("：这条语句创建索引的值必须是唯一的（除了NULL外，NULL可能会出现多次）。")]),a._v(" "),t("li",[t("strong",[a._v("ALTER TABLE tbl_name ADD INDEX index_name (column_list)")]),a._v("：添加普通索引，索引值可出现多次。")]),a._v(" "),t("li",[t("strong",[a._v("ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list)")]),a._v("：该语句指定了索引为 FULLTEXT ，用于全文索引。")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("-- 在表中添加索引\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" ALTER TABLE testalter_tbl ADD INDEX "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n-- 在alter命令中使用drop命令来删除索引\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" ALTER TABLE testalter_tbl DROP INDEX c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h2",{attrs:{id:"_5-使用-alter-命令添加和删除主键"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-使用-alter-命令添加和删除主键"}},[a._v("#")]),a._v(" 5. 使用 alter 命令添加和删除主键")]),a._v(" "),t("p",[a._v("主键作用于列上（可以一个列或多个列联合主键），添加主键索引时，你需要确保该主键默认不为空（NOT NULL）。")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" ALTER TABLE testalter_tbl MODIFY i INT NOT NULL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" ALTER TABLE testalter_tbl ADD PRIMARY KEY "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("-- 使用 ALTER 命令删除主键：\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" ALTER TABLE testalter_tbl DROP PRIMARY KEY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h2",{attrs:{id:"_6-显示索引信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-显示索引信息"}},[a._v("#")]),a._v(" 6. 显示索引信息")]),a._v(" "),t("p",[a._v("可以使用 SHOW INDEX 命令来列出表中的相关的索引信息。可以通过添加 \\G 来格式化输出信息。")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" SHOW INDEX FROM table_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("G\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);